(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45c2acf8"],{"24a8":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-info"},[t.edit?r("div",{staticClass:"info"},[r("div",{staticClass:"user-table"},[r("table",{attrs:{width:"1200",height:"400"}},[r("tr",[r("td",{attrs:{rowspan:"4",width:"50px"}},[t._v("头像:")]),r("td",{attrs:{rowspan:"4",width:"210px"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,action:"/api/upload/img"}},[t.squareUrl?r("img",{staticClass:"avatar",attrs:{src:t.squareUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("td",{attrs:{width:"60px",height:"140px",rowspan:"2"}},[t._v("用户名: ")]),r("td",{attrs:{width:"250px",rowspan:"2"}},[r("el-input",{staticClass:"create-input",attrs:{placeholder:"请输入内容"},on:{blur:t.validateUsername},model:{value:t.userForm.username,callback:function(e){t.$set(t.userForm,"username",e)},expression:"userForm.username"}})],1),r("td",{attrs:{rowspan:"4",width:"50px"}},[t._v("简介:")]),r("td",{attrs:{rowspan:"4",width:"350px"}},[r("el-input",{staticClass:"create-input",attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.userForm.sign,callback:function(e){t.$set(t.userForm,"sign",e)},expression:"userForm.sign"}})],1),r("td",{attrs:{height:"10px",align:"right",width:"240px"}},[r("el-button",{attrs:{size:"medium"},on:{click:function(e){t.edit=!t.edit}}},[t._v("返回")]),r("el-button",{staticClass:"send",attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v("保存")])],1)]),t._m(0),r("tr",[r("td",{attrs:{rowspan:"2",width:"60px"}},[t._v("手机号:")]),r("td",{attrs:{rowspan:"2",width:"250px"}},[r("el-input",{staticClass:"create-input",attrs:{placeholder:"请输入内容"},on:{blur:t.validateMobile},model:{value:t.userForm.mobile,callback:function(e){t.$set(t.userForm,"mobile",e)},expression:"userForm.mobile"}})],1)]),t._m(1)])])]):t._e(),t.edit?t._e():r("div",{staticClass:"info"},[r("div",{staticClass:"user-table"},[r("table",{attrs:{width:"1200",height:"400"}},[r("tr",[r("td",{attrs:{rowspan:"4",width:"50px"}},[t._v("头像:")]),r("td",{attrs:{rowspan:"4",width:"210px"}},[r("el-avatar",{attrs:{shape:"square",size:200,src:t.squareUrl}})],1),r("td",{attrs:{width:"60px",height:"80px",rowspan:"2"}},[t._v("用户名: ")]),r("td",{attrs:{width:"250px",rowspan:"2"}},[r("p",[t._v(t._s(t.userForm.username))])]),r("td",{attrs:{rowspan:"4",width:"50px"}},[t._v("简介:")]),r("td",{attrs:{rowspan:"4",width:"350px"}},[r("p",[t._v(t._s(t.userForm.sign))])]),r("td",{attrs:{height:"10px",align:"right",width:"240px"}},[r("el-button",{attrs:{size:"medium"},on:{click:function(e){t.edit=!t.edit}}},[t._v("编辑")]),r("el-button",{staticClass:"send",attrs:{type:"primary",size:"medium"},on:{click:t.save}},[t._v("保存")])],1)]),t._m(2),r("tr",[r("td",{attrs:{rowspan:"2",width:"60px"}},[t._v("手机号:")]),r("td",{attrs:{rowspan:"2",width:"250px"}},[r("p",[t._v(t._s(t.userForm.mobile))])])]),t._m(3)])])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td")])}],i=r("5530"),n=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("2f62")),o=r("3fa5"),c=r("abce"),u=r("6a1d"),d={name:"UserInfo",computed:Object(i["a"])({},Object(n["b"])(["consumerInfo"])),created:function(){var t=this;Object(c["b"])(this.userId).then((function(e){t.userForm=e.user_info,t.squareUrl=e.user_info.avatar}))},data:function(){return{edit:!1,userId:JSON.parse(Object(u["a"])("userInfo")).id,squareUrl:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",userForm:""}},methods:{handleAvatarSuccess:function(t,e){2e3===t.code?(this.squareUrl=URL.createObjectURL(e.raw),this.userForm.avatar=t.url):Object(o["megError"])("上传图片失败!")},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,r=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&r},save:function(){var t=this;Object(c["d"])(this.userId,this.userForm).then((function(){t.$store.dispatch("setUserInfo",t.userForm).then((function(){Object(o["megSuc"])("修改成功!"),t.edit=!1}))}))},validateMobile:function(){var t=/^1[3-9]\d{9}$/;""===this.userForm.mobile?Object(o["megWarn"])("手机号必填"):t.test(this.userForm.mobile)||Object(o["megWarn"])("手机号格式错误")},validateUsername:function(){""===this.userForm.username?Object(o["megWarn"])("用户名必填"):(this.userForm.username<3||this.userForm.username>20)&&Object(o["megWarn"])("用户名为3-20位")}}},l=d,p=(r("ac7c"),r("2877")),m=Object(p["a"])(l,s,a,!1,null,null,null);e["default"]=m.exports},"490a":function(t,e,r){},ac7c:function(t,e,r){"use strict";r("490a")}}]);
//# sourceMappingURL=chunk-45c2acf8.d0828be8.js.map